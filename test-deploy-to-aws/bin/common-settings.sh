#!/bin/false

Application="undefined"
ArchLayer="undefined"

###-------------------

export ENV="prod"

export AWSREGION="us-east-2"
export AWSPROFILE="sarmaapi"

REGIONNAME="Virginia"
AWSPROFILEREGION="--profile ${AWSPROFILE} --region ${AWSREGION}"

###-------------------

PLATFORMID="CRRI"  ### In case the Acct# belongs to a COLLECTION of Environments
PROJECTNAME="myproj"
PROJECTID="${PLATFORMID}-${PROJECTNAME}"

export EMAILADDRESS="ToSarma@gmail.com"
export CONTACT="${EMAILADDRESS}"

###--------------------------------------------------------
###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
###--------------------------------------------------------

### SECTION: Derived Variables

DateTimeStamp=$(date +"%Y-%m-%dT%H:%M")

###--------------------------------------------------------

LOCATION=${REGIONNAME}

CHRGCODE="${CONTACT}"
ITOwner="${CONTACT}"

DistrList="${CONTACT}"
SVCGRP="${CONTACT}"
Validated="no"

BizOwner=${CONTACT}
ORGName=${PLATFORMID}
BizUnit="Ops"
BizSubUnit="me"
UserBase="undefined"

###--------------------------------------------------------
###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
###--------------------------------------------------------

### SECTION: Derive AWS Account Information

# aws sts get-caller-identity --query Account --output text ${AWSPROFILEREGION} >& /dev/null
AWSACCOUNTID=$( aws sts get-caller-identity --query Account --output text ${AWSPROFILEREGION} )
if [ $? -ne 0 ]; then
    echo "!! ATTENTION !! PRE-REQUISITE: You MUST login successfully -- VIA CLI -- into CloudBoost."
    echo "!! ATTENTION !! Then .. .. SUCCESSFULLY run a TEST-command with _NO_ errors:->  aws s3 ls ${AWSPROFILEREGION}"
    exit 1
fi
echo "AWSACCOUNTID = '${AWSACCOUNTID}'"

###--------------------------------------------------------


BOUNDARYPOLICY="arn:aws:iam::${AWSACCOUNTID}:policy/my-BoundaryPolicy-PretendAsEnterpriseBoundary"     ### <----------------------- !! SWITCH !! <--------------------------
echo "BOUNDARYPOLICY = '${BOUNDARYPOLICY}'"


###--------------------------------------------------------
###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
###--------------------------------------------------------

TAGS_ARR=(
    Application=${Application} LOCATION=${LOCATION} ENV=${ENV}
    CHRGCODE=${CHRGCODE} ITOwner=${ITOwner}
    DistrList=${DistrList} SVCGRP=${SVCGRP} Validated=${Validated}
    BizOwner=${BizOwner} ORGName=${ORGName}
    BizUnit=${BizUnit} BizSubUnit=${BizSubUnit}
    UserBase=${UserBase}
    ArchLayer=${ArchLayer}
)

# echo ${TAGS_ARR[@]}

###------------------------------
TAGS=(
    Key=Application,Value=${Application} Key=LOCATION,Value=${LOCATION} Key=ENV,Value=${ENV}
    Key=CHRGCODE,Value=${CHRGCODE} Key=ITOwner,Value=${ITOwner}
    Key=DistrList,Value=${DistrList} Key=SVCGRP,Value=${SVCGRP} Key=Validated,Value=${Validated}
    Key=BizOwner,Value=${BizOwner} Key=ORGName,Value=${ORGName}
    Key=BizUnit,Value=${BizUnit} Key=BizSubUnit,Value=${BizSubUnit}
    Key=UserBase,Value=${UserBase}
    Key=ArchLayer,Value=${ArchLayer}
)

# echo ${TAGS[@]}

### EoF
